if (self.CavalryLogger) { CavalryLogger.start_js(["lsAfH"]); }

__d("ReactShareDialogComposerActionType",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({SET_SHARE_DIALOG_TARGET:null,SET_SHARE_DIALOG_TARGET_INFO:null,SET_SHARE_DIALOG_TARGETED_PRIVACY_DATA:null,SET_SHARE_DIALOG_TYPE:null,SET_SHARE_TO_GROUPS_AS_PAGE:null})}),null);
__d("ShareDialogAudienceHeader.react",["cx","ShareDialogAudience.react","ShareDialogAudienceSelector.react","ShareDialogDataSources","SharerType","React","emptyFunction"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("ShareDialogAudience.react").TYPES,l=c("ShareDialogDataSources").TYPES,m=c("React").PropTypes;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;n.prototype.render=function(){"use strict";__p&&__p();var o=this.props.dataSources,p=this.props.activeAudience,q=[];if(this.props.sharerType===c("SharerType").MESSAGE_ONLY)q.push(k.MESSAGE);else if(this.props.sharerType===c("SharerType").PAGE_ONLY)q.push(k.PAGE);else if(this.props.sharerType===c("SharerType").PAGE_VIEWER)q.push(k.OWN);else{q.push(k.OWN);if(o.getSource(l.PERSON_WALL))q.push(k.PERSON);if(o.getSource(l.GROUP))q.push(k.GROUP);if(o.getSource(l.PAGE))q.push(k.PAGE);if(o.getSource(l.MESSAGE))q.push(k.MESSAGE)}var r="__0k"+(this.props.activeAudience===k.OWN?" _47xt":"")+(this.props.activeAudience===k.PERSON?" _47xu":"")+(this.props.activeAudience===k.GROUP?" _47xv":"")+(this.props.activeAudience===k.PAGE?" _47xw":"")+(this.props.activeAudience===k.MESSAGE?" _47xx":"");return c("React").createElement("div",{className:r},c("React").createElement(c("ShareDialogAudienceSelector.react"),{allowedAudiences:q,activeAudience:p,onAudienceSelect:this.props.onAudienceSelect}))};function n(){"use strict";i.apply(this,arguments)}n.propTypes={activeAudience:function o(p){if(!k.isValid(p.activeAudience))return new Error("The active audience is invalid.")},dataSources:m.instanceOf(c("ShareDialogDataSources")),onAudienceSelect:m.func};n.defaultProps={onAudienceSelect:c("emptyFunction")};f.exports=n}),null);
__d("ReactSharer.react",["ReactShareDialogComposer.react","ShareDialogAudienceHeader.react","ShareDialogAudienceTypes","ShareDialogAudience.react","ShareDialogDataSources","React"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.render=function(){"use strict";return c("React").createElement("div",null,c("React").createElement(c("ShareDialogAudienceHeader.react"),{key:"title",activeAudience:this.props.activeAudience,dataSources:this.props.dataSources,onAudienceSelect:this.props.onTargetSelect}),c("React").createElement(c("ShareDialogAudience.react"),{key:"audience",userId:this.props.userId,activeAudience:this.props.activeAudience,messageTargets:this.props.messageTargets,dataSources:this.props.dataSources,onChange:this.props.onChangeAudienceTargets,onClear:this.props.onClearAudienceTargets,showGroupThreads:this.props.gks&&this.props.gks.showGroupThreads}),c("React").createElement(c("ReactShareDialogComposer.react"),this.props))};function k(){"use strict";h.apply(this,arguments)}k.propTypes={activeAudience:c("ShareDialogAudienceTypes").propType,dataSources:j.instanceOf(c("ShareDialogDataSources")),privacySelector:j.instanceOf(HTMLElement).isRequired,pagePrivacySelector:j.instanceOf(HTMLElement).isRequired,userId:j.string.isRequired,attachment:j.object,gks:j.shape({showGroupThreads:j.bool}),messageTargets:j.array,onCancel:j.func,onChangeAudienceTargets:j.func,onClearAudienceTargets:j.func,onTargetSelect:j.func,onPost:j.func,postButtonLabel:j.string,taggersConfig:j.object.isRequired};f.exports=k}),null);
__d("ReactSharerContainer.react",["ReactComposerAudienceStore","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStatusStore","ReactComposerTaggerStore","ReactComposerTaggerType","ReactSharer.react","ReactShareDialogComposerActions","ReactShareDialogComposerStore","ShareDialogAudienceTypes","SharerType","ReactComponentWithPureRenderMixin","React"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").createClass({displayName:"ReactSharerContainer",contextTypes:c("ReactComposerContextTypes"),mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerPropsAndStoreBasedStateMixin")(c("ReactShareDialogComposerStore"))],statics:{beforeCalculateInitialState:function i(j,k){var l=c("ShareDialogAudienceTypes").OWN;if(k.sharerType===c("SharerType").MESSAGE_ONLY)l=c("ShareDialogAudienceTypes").MESSAGE;else if(k.sharerType===c("SharerType").PAGE_ONLY)l=c("ShareDialogAudienceTypes").PAGE;c("ReactShareDialogComposerActions").setTarget(j,l);c("ReactShareDialogComposerActions").setTargetInfo(j,{userId:k.userId})},calculateState:function i(j,k){var l=c("ReactShareDialogComposerStore").getTargetInfo(j),m=l.audienceTargets,n=l.userId;return{activeAudience:c("ReactShareDialogComposerStore").getTarget(j),audienceTargets:m,userId:n}}},render:function i(){return c("React").createElement(c("ReactSharer.react"),babelHelpers["extends"]({},this.props,this.state,{onCancel:this._onCancel,onChangeAudienceTargets:this._onChangeAudienceTargets,onClearAudienceTargets:this._onClearAudienceTargets,onPost:this._onPost,onTargetSelect:this._onTargetSelect}))},_getStatefulResponse:function i(){var j=this.props.contextConfig.composerID,k=c("ReactComposerTaggerStore").getTaggersData(j),l=c("ReactComposerAudienceStore").getAudience(j),m=c("ReactComposerStatusStore").getMessage(j),n=c("ReactShareDialogComposerStore").getTarget(j),o=c("ReactShareDialogComposerStore").getTargetInfo(j),p=c("ReactShareDialogComposerStore").getTargetedPrivacyData(j),q=o.audienceTargets?o.audienceTargets:[],r=k[c("ReactComposerTaggerType").PEOPLE],s=k[c("ReactComposerTaggerType").LOCATION],t=k[c("ReactComposerTaggerType").ACTIVITY],u=r.map(function(z){return z.getUniqueID()}),v=null,w=null;if(t.object){var x=t.object.getUniqueID(),y=t.object.getTitle();if(!x||x===y)w=y;else v=x}return{actorId:o.userId,audienceType:n,audienceTargets:q,appId:this.props.appId,internalExtra:this.props.internalExtra,message:m,messageTags:this.props.messageTags,ownerId:this.props.ownerId,privacy:l,postId:this.props.postId,sharedAdId:this.props.sharedAdId,shareType:this.props.shareType,source:"osbach-sharer",taggedActionId:t.action?t.action.getUniqueID():null,taggedActionIconId:t.actionIconID,taggedObjectId:v,taggedObjectStr:w,taggedPeople:u,taggedPlace:s&&s.place?s.place.getUniqueID():null,targetedPrivacyData:p}},_onTargetSelect:function i(j){c("ReactShareDialogComposerActions").setTarget(this.context.composerID,j);c("ReactShareDialogComposerActions").setTargetInfo(this.context.composerID,{audienceTargets:null,userId:this.props.userId})},_onCancel:function i(j){this.props.onCancel&&this.props.onCancel(this._getStatefulResponse(),j)},_onChangeAudienceTargets:function i(j){if(j.length===0)return;var k=j[0],l=this.state.activeAudience===c("ShareDialogAudienceTypes").PAGE?{audienceTargets:[k.pageId],userId:k.actorId}:{audienceTargets:j,userId:this.props.userId};c("ReactShareDialogComposerActions").setTargetInfo(this.context.composerID,l)},_onClearAudienceTargets:function i(){c("ReactShareDialogComposerActions").setTargetInfo(this.context.composerID,{audienceTargets:null,userId:this.props.userId})},_onPost:function i(j){this.props.onPost(this._getStatefulResponse(),j)}});f.exports=h}),null);
__d("ReactSharerRoot.react",["ReactComposerContextConfig","ReactComposerContextProviderMixin","ReactSharerContainer.react","ReactComponentWithPureRenderMixin","React"],(function a(b,c,d,e,f,g){var h=c("React").createClass({displayName:"ReactSharerRoot",mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactComposerContextProviderMixin")],propTypes:{contextConfig:c("ReactComposerContextConfig").isRequired},render:function i(){return c("React").createElement(c("ReactSharerContainer.react"),this.props)}});f.exports=h}),null);
__d("ReactSharerInit",["ReactSharerRoot.react","ShareDialogAudienceTypes","ShareDialogDataSources","ComposerEntryPointRef","DOM","Sharer","React","ReactDOM","uniqueID"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j={init:function k(l,m){l=this.getPropsFromAsyncResponse(l);h=m;c("ReactDOM").render(c("React").createElement("div",null,c("React").createElement(c("ReactSharerRoot.react"),babelHelpers["extends"]({contextConfig:{actorID:l.userId,composerID:c("uniqueID")(),composerType:c("ComposerEntryPointRef").SHARE_BUTTON_PLUGIN,gks:l.gks,targetID:l.userId},onCancel:this._onCancel,onPost:this._onPost},l)),c("React").createElement("div",{ref:function n(o){return i=o}})),h)},_onCancel:function k(l,m){c("Sharer").close();m.preventDefault()},_onPost:function k(l,m){__p&&__p();c("DOM").empty(i);if(l.audienceType===c("ShareDialogAudienceTypes").OWN)c("DOM").appendContent(i,c("DOM").create("input",{name:"privacyx",type:"hidden",value:l.privacy}));else if(l.audienceType===c("ShareDialogAudienceTypes").PERSON)c("DOM").appendContent(i,c("DOM").create("input",{name:"friendTarget",type:"hidden",value:l.audienceTargets.toString()}));else if(l.audienceType===c("ShareDialogAudienceTypes").MESSAGE)c("DOM").appendContent(i,c("DOM").create("input",{name:"messageTarget",type:"hidden",value:l.audienceTargets.toString()}));else if(l.audienceType===c("ShareDialogAudienceTypes").GROUP)c("DOM").appendContent(i,c("DOM").create("input",{name:"groupTarget",type:"hidden",value:l.audienceTargets.toString()}));else if(l.audienceType===c("ShareDialogAudienceTypes").EVENT)c("DOM").appendContent(i,c("DOM").create("input",{name:"eventTarget",type:"hidden",value:l.audienceTargets.toString()}));else if(l.audienceType===c("ShareDialogAudienceTypes").PAGE){c("DOM").appendContent(i,[c("DOM").create("input",{name:"pageTarget",type:"hidden",value:l.audienceTargets.toString()}),c("DOM").create("input",{name:"av",type:"hidden",value:l.actorId})]);if(l.targetedPrivacyData)for(var n in l.targetedPrivacyData)if(l.targetedPrivacyData[n]&&l.targetedPrivacyData[n].constructor===Array)for(var o=0;o<l.targetedPrivacyData[n].length;o++)c("DOM").appendContent(i,c("DOM").create("input",{name:"targeted_privacy_data["+n+"]["+o+"]",type:"hidden",value:l.targetedPrivacyData[n][o]}));else c("DOM").appendContent(i,c("DOM").create("input",{name:"targeted_privacy_data["+n+"]",type:"hidden",value:l.targetedPrivacyData[n]}))}if(l.taggedPeople){var o=0;l.taggedPeople.forEach(function(p){c("DOM").appendContent(i,c("DOM").create("input",{name:"composertags_with["+o+"]",type:"hidden",value:p}));o++})}c("DOM").appendContent(i,[c("DOM").create("input",{name:"xhpc_message_text",type:"hidden",value:l.message}),c("DOM").create("input",{name:"xhpc_message",type:"hidden",value:l.message}),c("DOM").create("input",{name:"composertags_place",type:"hidden",value:l.taggedPlace}),c("DOM").create("input",{name:"action_type_id[]",type:"hidden",value:l.taggedActionId}),c("DOM").create("input",{name:"icon_id",type:"hidden",value:l.taggedActionIconId}),c("DOM").create("input",{name:"object_id[]",type:"hidden",value:l.taggedObjectId}),c("DOM").create("input",{name:"object_str[]",type:"hidden",value:l.taggedObjectStr}),c("DOM").create("input",{name:"is_react",type:"hidden",value:"true"})])},getPropsFromAsyncResponse:function k(l){var m=l.sources,n=babelHelpers.objectWithoutProperties(l,["sources"]),o=m.person,p=m.personTag,q=m.personWall,r=m.group,s=m.page,t=m.mentions,u=m.place,v=m.feeling,w=m.action,x=m.object,y=new(c("ShareDialogDataSources"))().addSource(c("ShareDialogDataSources").TYPES.ACTION,w).addSource(c("ShareDialogDataSources").TYPES.GROUP,r).addSource(c("ShareDialogDataSources").TYPES.FEELING,v).addSource(c("ShareDialogDataSources").TYPES.MENTIONS,t).addSource(c("ShareDialogDataSources").TYPES.MESSAGE,o).addSource(c("ShareDialogDataSources").TYPES.OBJECT,x).addSource(c("ShareDialogDataSources").TYPES.PAGE,s).addSource(c("ShareDialogDataSources").TYPES.PERSON,p).addSource(c("ShareDialogDataSources").TYPES.PERSON_WALL,q).addSource(c("ShareDialogDataSources").TYPES.PLACE,u);return babelHelpers["extends"]({dataSources:y},n)}};f.exports=j}),null);